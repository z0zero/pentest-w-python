from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/', methods=['GET', 'POST'])
def validate_code():
    if request.method == 'POST':
        code = request.form.get('code')
        if code == '000100':
            return jsonify({"code": 200, "message": "Kode benar"})
        else:
            return jsonify({"code": 400, "message": "Kode tidak valid"})
    else:
        return """
<!DOCTYPE html>
<html>
<head>
    <title>Validasi Kode</title>
    <script>
    window.onload = function() {
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();
            fetch('/', {
                method: 'POST',
                body: new FormData(this)
            }).then(function(response) {
                return response.json();
            }).then(function(data) {
                console.log(data);
            });
        });
    };
    </script>
</head>
<body>
    <form method="POST">
        <input type="text" id="code" name="code" required>
        <input type="submit" value="Submit">
    </form>
</body>
</html>
        """

if __name__ == '__main__':
    app.run(port=5000)